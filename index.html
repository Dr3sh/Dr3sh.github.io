<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$uicideboy$ songs</title>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <link href="https://fonts.cdnfonts.com/css/poppins" rel="stylesheet">
</head>
<body>
    <div id="output"></div>
</body>
<style>
    body {
        font-family: 'Poppins', sans-serif;
        display: flex;
        width: 100vw;
        height: 100vh;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        overflow: hidden;
    }
    .track {
        font-size: 1.5em;
        font-weight: bold;
    }
    .albumName, .artist, .trackDuration, .albumRelease, .spotifyLink {
        font-size: 1.2em;
    }
    #imagen {
        max-width: 30vw;
        width: 300px;
        height: auto;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .trackInfo {
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 90vw;
    word-break: break-word;
    text-align: center;
    gap: 0.5em;
}
    .spotifyLogo {
        width: auto;
        height: 500px;
        max-height: 10vh;
    }
</style>
    <script>
        function msToMinutes(ms) {
        const totalSeconds = Math.floor(ms / 1000);
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;
        return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        var numero = 0;
        fetch('songs.csv')
            .then(response => response.text())
            .then(csvText => {
                Papa.parse(csvText, {
                    header: true,
                    complete: function(results) {
                        const total = results.data.length;
                        const numero = Math.floor(Math.random() * total);
                        const track = results.data[numero];
                        const rawTrackUri = track["Track URI"];
                        const trackId = rawTrackUri.replace("spotify:track:", "");
                        const spotifyLink = `https://open.spotify.com/track/${trackId}`;
                        // Muestra el primer dato de la primera fila y columna
                        document.getElementById('output').innerHTML =
                        `<div class="trackInfo">
                        <img id="imagen">
                        <div class="track">${track["Track Name"]}</div>
                        <div class="albumName">${track["Album Name"]}</div>
                        <div class="artist">${track["Artist Name(s)"]}</div>
                        <div class="trackDuration">${msToMinutes(track["Track Duration (ms)"])}</div>
                        <div class="albumRelease">${track["Album Release Date"]}</div>
                        <p></p>
                        <a href="${spotifyLink}" target="_blank"><img class="spotifyLogo" src="Spotify_icon.svg"></a>
                        </div>`

                    
                        document.getElementById('imagen').src = results.data[numero]["Album Image URL"];
                    }
                });
            });
    </script>
</html>